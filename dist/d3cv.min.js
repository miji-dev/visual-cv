/*! d3cv 01-08-2016 */
!d3,d3.cv=function(a){"use strict";function b(){F=I.clientWidth,E=I.clientHeight}function c(a){var b=document.createElement("div");b.id="tooltip",b.className="tooltip",b.innerHTML="<h4 class='tooltip-title'>"+(a.title||"No title")+"</h4><div class='tooltip-content'><p>"+(a.desc||"")+"</p><p>Von "+f(a.startDate.getDate())+"."+f(a.startDate.getMonth()+1)+"."+a.startDate.getFullYear()+" bis "+(a.ongoing?P:f(a.endDate.getDate())+"."+f(a.endDate.getMonth()+1)+"."+a.endDate.getFullYear())+"</p></div>",I.appendChild(b)}function d(){I.removeChild(I.querySelector("#tooltip"))}function e(){var a,b,e;a=d3.select(H).append("svg").attr("class","chart").attr("width",F).attr("height",E).append("g").attr("class","d3-cv").attr("width",F).attr("height",E),b=a.selectAll(".chart").data(C).enter().append("g"),b.append("rect").attr("class",k).style("stroke","#fff").attr("y",0).attr("transform",h).attr("height",u).transition().duration(M).attr("width",g),e=a.selectAll(".chart").data(D).enter().append("g"),e.append("circle").attr("r",N).attr("cx",i).attr("cy",j).attr("class",l),L&&(b.on("mouseenter",c).on("mouseleave",d),e.on("mouseenter",c).on("mouseleave",d)),a.append("g").attr("class","x axis").attr("transform","translate(0, "+(E-G.top-G.bottom)+")").transition().duration(M).call(z)}function f(a){return a<10?"0"+a:a}function g(a){return x(a.endDate||new Date)-x(a.startDate)}function h(a){return"translate("+x(a.startDate)+","+(E-G.top-G.bottom-(u+1)*a.level)+")"}function i(a){return x(a.startDate)}function j(a){var b=E-G.bottom-G.top-2*N*a.level;return b}function k(a){return"bar "+(a.type?"bar-"+a.type:"")}function l(a){return"circle pulse "+(a.type?"circle-"+a.type:"")}function m(){void 0===C||C.length<1?(v=d3.timeDay.offset(new Date,-3),w=d3.timeHour.offset(new Date,3)):(C.sort(function(a,b){return a.endDate-b.endDate}),w=C[C.length-1].endDate,C.sort(function(a,b){return a.startDate-b.startDate}),C.forEach(function(a,b){a.id=b}),v=C[0].startDate)}function n(){x=d3.scaleTime().domain([v,w]).range([0,F]).clamp(!0),z=d3.axisBottom(x).tickFormat(d3.timeFormat(J))}function o(){y=d3.scaleBand().domain(O).rangeRound([0,E-G.top-G.bottom],0),A=d3.axisLeft(y).tickSize(0),u=Math.floor((E-G.bottom-G.top)/(O.length+1))-2}function p(){var a=[];D.forEach(function(a){a.startDate=a.startDate?new Date(a.startDate):new Date,a.endDate=a.endDate?new Date(a.endDate):a.startDate}),C.forEach(function(b){b.startDate=b.startDate?new Date(b.startDate):new Date,void 0===b.endDate&&(b.ongoing=!0),b.endDate=b.endDate?new Date(b.endDate):new Date,Math.ceil((b.endDate.getTime()-b.startDate.getTime())/864e5)<K?D.push(b):a.push(b)}),D.sort(function(a,b){return a.startDate-b.startDate}),C=a}function q(){var a,b,c,d,e;for(a=0,c=D.length;a<c;a++){for(d=D[a],d.blockedLevels=[],d.level=1,b=0;b<a;b++)e=D[b],r(d.startDate,e.startDate)&&d.blockedLevels.push(e.level);for(d.blockedLevels.sort(function(a,b){return a-b}),b=0;b<d.blockedLevels.length;b++){if(b+1<d.blockedLevels[b]){d.level=b+1;break}d.level=b+2,O.indexOf(d.level)<0&&O.push(d.level)}}}function r(a,b){var c=2629746e3,d=a.getTime(),e=b.getTime();return d>=e-c&&d<=e+c}function s(){var a,b,c,d,e;for(O=[1],a=0,c=C.length;a<c;a++){for(d=C[a],d.blockedLevels=[],d.level=1,b=0;b<a;b++)e=C[b],d.startDate<=e.endDate&&(d.blockedLevels.push(e.level),O.indexOf(e.level)<0&&O.push(e.level));for(d.blockedLevels.sort(function(a,b){return a-b}),b=0;b<d.blockedLevels.length;b++){if(b+1<d.blockedLevels[b]){d.level=b+1;break}d.level=b+2,O.indexOf(d.level)<0&&O.push(d.level)}}}function t(){b(),p(),m(),s(),q(),n(),o(),e()}var u,v,w,x,y,z,A,B={},C=a.periodData||[],D=a.momentData||[],E=a.chartHeight||0,F=a.chartWidth||0,G=a.chartMargin||{top:20,right:40,bottom:20,left:20},H=a.chartSelector||"body",I=document.querySelector(H),J=a.tickFormat||"%Y",K=a.periodThreshold||28,L=a.showTooltips||!0,M=a.transitionDuration||1e3,N=20,O=[],P="heute";return t(),B};
