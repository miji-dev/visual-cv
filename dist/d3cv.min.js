/*! d3cv 02-08-2016 */
!d3,d3.cv=function(a){"use strict";function b(){z=U.clientWidth,y=U.clientHeight}function c(a){var b=document.createElement("div");b.id="tooltip",b.className="tooltip",b.innerHTML="<h4 class='tooltip-title'>"+(a.title||"No title")+"</h4><div class='tooltip-content'><p>"+(a.desc||"")+"</p><p>Von "+j(a.startDate.getDate())+"."+j(a.startDate.getMonth()+1)+"."+a.startDate.getFullYear()+" bis "+(a.ongoing?P:j(a.endDate.getDate())+"."+j(a.endDate.getMonth()+1)+"."+a.endDate.getFullYear())+"</p></div>",U.appendChild(b)}function d(){U.removeChild(U.querySelector("#tooltip"))}function e(){var a,b;a=d3.select(K).append("svg").attr("class","chart").attr("width",z).attr("height",y),b=a.append("g").attr("class","d3-cv").attr("width",z).attr("height",y),f(b),g(b),h(a),R&&i(a)}function f(a){var b=a.selectAll(".chart").data(H).enter().append("g");b.append("rect").attr("class",o).style("stroke","#fff").attr("y",0).attr("transform",l).attr("height",A).transition().duration(O).attr("width",k),N&&b.on("mouseenter",c).on("mouseleave",d)}function g(a){var b=a.selectAll(".chart").data(I).enter().append("g");b.append("circle").attr("r",Q).attr("cx",m).attr("cy",n).attr("class",p),N&&b.on("mouseenter",c).on("mouseleave",d)}function h(a){a.append("g").attr("class","x axis").attr("transform","translate(0, "+(y-J.top-J.bottom)+")").transition().duration(O).call(F)}function i(a){var b,c=0,d=0;b=a.selectAll(".legend").data(S).enter().append("g").attr("class","legend").attr("transform",function(a){var b=25*c,e=d;return d+=6*a.length+50,d>z&&(e=0,d=6*a.length+50,c++,b=25*c),"translate("+e+","+b+")"}),b.append("rect").attr("x",0).attr("class",function(a){return a}).attr("width",18).attr("height",18),b.append("text").attr("x",20).attr("y",9).attr("dy",".35em").style("text-anchor","start").style("font-family","monospace").text(function(a){return a})}function j(a){return a<10?"0"+a:a}function k(a){return D(a.endDate||new Date)-D(a.startDate)}function l(a){return"translate("+D(a.startDate)+","+(y-J.top-J.bottom-(A+1)*a.level)+")"}function m(a){return D(a.startDate)}function n(a){var b=y-J.bottom-J.top-2*Q*a.level;return b}function o(a){return"bar "+(a.type?a.type:"")}function p(a){return"circle pulse "+(a.type?a.type:"")}function q(){(void 0===H||H.length<1)&&(void 0===I||I.length<1)?(B=d3.timeDay.offset(new Date,-3),C=d3.timeHour.offset(new Date,3)):(H.sort(function(a,b){return b.endDate-a.endDate}),I.sort(function(a,b){return b.endDate-a.endDate}),C=H[0].endDate>=I[0].endDate?H[0].endDate:I[0].endDate,H.sort(function(a,b){return a.startDate-b.startDate}),I.sort(function(a,b){return a.startDate-b.startDate}),B=H[0].startDate<=I[0].startDate?H[0].startDate:I[0].startDate)}function r(){D=d3.scaleTime().domain([B,C]).range([0,z]).clamp(!0),F=d3.axisBottom(D).tickFormat(d3.timeFormat(L))}function s(){E=d3.scaleBand().domain(T).rangeRound([0,y-J.top-J.bottom],0),d3.axisLeft(E).tickSize(0),A=Math.floor((y-J.bottom-J.top)/(T.length+1))-2}function t(){var a=[],b=[];I.forEach(function(c){c.startDate=c.startDate?new Date(c.startDate):new Date,c.endDate=c.endDate?new Date(c.endDate):c.startDate,Math.ceil((c.endDate.getTime()-c.startDate.getTime())/864e5)<M?b.push(c):a.push(c),S.indexOf(c.type)<0&&S.push(c.type)}),H.forEach(function(c){c.startDate=c.startDate?new Date(c.startDate):new Date,void 0===c.endDate&&(c.ongoing=!0),c.endDate=c.endDate?new Date(c.endDate):new Date,Math.ceil((c.endDate.getTime()-c.startDate.getTime())/864e5)<M?b.push(c):a.push(c),S.indexOf(c.type)<0&&S.push(c.type)}),I=b,H=a}function u(){var a,b,c,d,e;for(a=0,c=I.length;a<c;a++){for(d=I[a],d.blockedLevels=[],d.level=1,b=0;b<a;b++)e=I[b],v(d.startDate,e.startDate)&&d.blockedLevels.push(e.level);for(d.blockedLevels.sort(function(a,b){return a-b}),b=0;b<d.blockedLevels.length;b++){if(b+1<d.blockedLevels[b]){d.level=b+1;break}d.level=b+2,T.indexOf(d.level)<0&&T.push(d.level)}}}function v(a,b){var c=2629746e3,d=a.getTime(),e=b.getTime();return d>=e-c&&d<=e+c}function w(){var a,b,c,d,e;for(T=[1],a=0,c=H.length;a<c;a++){for(d=H[a],d.blockedLevels=[],d.level=1,b=0;b<a;b++)e=H[b],d.startDate<=e.endDate&&(d.blockedLevels.push(e.level),T.indexOf(e.level)<0&&T.push(e.level));for(d.blockedLevels.sort(function(a,b){return a-b}),b=0;b<d.blockedLevels.length;b++){if(b+1<d.blockedLevels[b]){d.level=b+1;break}d.level=b+2,T.indexOf(d.level)<0&&T.push(d.level)}}}function x(){b(),t(),q(),w(),u(),r(),s(),e()}var y,z,A,B,C,D,E,F,G={},H=a.periodData||[],I=a.momentData||[],J=a.chartMargin||{top:20,right:40,bottom:20,left:20},K=a.chartSelector||"body",L=a.tickFormat||"%Y",M=a.periodThreshold||28,N=a.showTooltips||!0,O=a.transitionDuration||1e3,P=a.stringToday||"heute",Q=a.circleRadius||20,R=a.showLegend||!0,S=[],T=[],U=document.querySelector(K);return x(),G};
